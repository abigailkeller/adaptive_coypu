library(nimble)
library(tidyverse)
# read in data
raw_data <- readRDS("data/coypus.rds")
install.packages("nimble")
library(nimble)
library(tidyverse)
# read in data
raw_data <- readRDS("data/coypus.rds")
table(raw_data$removal_coypus)
table(raw_data$removal_coypus$Year)
table(raw_data$removal_coypus$Month)
knitr::opts_chunk$set(echo = TRUE,
cache = TRUE,
message = FALSE,
warning = FALSE,
dpi = 150,
fig.height=6,
fig.width = 1.777777*6)
library(tidyverse)
theme_set(theme_light())
raw_dat <- readRDS("data/coypus.rds")
raw_dat
raw_dat$removal_coypus %>%
filter(commune %in% c("candillargues",
"lansargues",
"mauguio",
"saint_nazaire_de_pezan",
"saint_just",
"valergues")) %>%
filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2022) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
raw_dat$removal_coypus %>%
filter(commune %in% c("candillargues",
"lansargues",
"mauguio",
"saint_nazaire_de_pezan",
"saint_just",
"valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2022) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
raw_dat$removal_coypus %>%
filter(commune %in% c("candillargues",
"lansargues",
"mauguio",
"saint_nazaire_de_pezan",
"saint_just",
"valergues")) %>%
filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2022) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
raw_dat$removal_coypus %>%
filter(commune %in% c("candillargues",
"lansargues",
"mauguio",
"saint_nazaire_de_pezan",
"saint_just",
"valergues")) %>%
filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2022) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
dat <- raw_dat$removal_coypus %>%
filter(commune %in% c("candillargues",
"lansargues",
"mauguio",
"saint_nazaire_de_pezan",
"saint_just",
"valergues")) %>%
filter(Month %in% c(2,3,4)) %>%
# mutate(Year = as_factor(Year)) %>%
pivot_wider(names_from = Month,
values_from = n) %>%
filter(Year == 2022)
dat
K <- nrow(dat) # nsites
J <- ncol(dat[,-c(1,2)]) # nsurveys
constants <- list(K = K, J = J)
data <- list(y = dat[,-c(1,2)],
n = apply(dat[,-c(1,2)], 1, sum),
temp = (raw_dat$temperature - mean(raw_dat$temperature))/sd(raw_dat$temperature))
data$y
data$temp
table(raw_dat$removal_coypus$Month)
raw_dat$removal_coypus %>%
filter(commune %in% c("candillargues",
"lansargues",
"mauguio",
"saint_nazaire_de_pezan",
"saint_just",
"valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2022) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
unique(raw_dat$removal_coypus$commune)
raw_dat$removal_coypus %>%
# filter(commune %in% c("candillargues",
#                       "lansargues",
#                       "mauguio",
#                       "saint_nazaire_de_pezan",
#                       "saint_just",
#                       "valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2022) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
raw_dat$removal_coypus %>%
# filter(commune %in% c("candillargues",
#                       "lansargues",
#                       "mauguio",
#                       "saint_nazaire_de_pezan",
#                       "saint_just",
#                       "valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2015) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
plot_2015 <- raw_dat$removal_coypus %>%
# filter(commune %in% c("candillargues",
#                       "lansargues",
#                       "mauguio",
#                       "saint_nazaire_de_pezan",
#                       "saint_just",
#                       "valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2015) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
plot_2016 <- raw_dat$removal_coypus %>%
# filter(commune %in% c("candillargues",
#                       "lansargues",
#                       "mauguio",
#                       "saint_nazaire_de_pezan",
#                       "saint_just",
#                       "valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2016) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
plot_2017 <- raw_dat$removal_coypus %>%
# filter(commune %in% c("candillargues",
#                       "lansargues",
#                       "mauguio",
#                       "saint_nazaire_de_pezan",
#                       "saint_just",
#                       "valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2017) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
plot_2018 <- raw_dat$removal_coypus %>%
# filter(commune %in% c("candillargues",
#                       "lansargues",
#                       "mauguio",
#                       "saint_nazaire_de_pezan",
#                       "saint_just",
#                       "valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2018) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
plot_2019 <- raw_dat$removal_coypus %>%
# filter(commune %in% c("candillargues",
#                       "lansargues",
#                       "mauguio",
#                       "saint_nazaire_de_pezan",
#                       "saint_just",
#                       "valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2019) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
plot_2020 <- raw_dat$removal_coypus %>%
# filter(commune %in% c("candillargues",
#                       "lansargues",
#                       "mauguio",
#                       "saint_nazaire_de_pezan",
#                       "saint_just",
#                       "valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2020) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
plot_2021 <- raw_dat$removal_coypus %>%
# filter(commune %in% c("candillargues",
#                       "lansargues",
#                       "mauguio",
#                       "saint_nazaire_de_pezan",
#                       "saint_just",
#                       "valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2021) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
plot_2022 <- raw_dat$removal_coypus %>%
# filter(commune %in% c("candillargues",
#                       "lansargues",
#                       "mauguio",
#                       "saint_nazaire_de_pezan",
#                       "saint_just",
#                       "valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2022) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
plot_2023 <- raw_dat$removal_coypus %>%
# filter(commune %in% c("candillargues",
#                       "lansargues",
#                       "mauguio",
#                       "saint_nazaire_de_pezan",
#                       "saint_just",
#                       "valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2023) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
plot_2024 <- raw_dat$removal_coypus %>%
# filter(commune %in% c("candillargues",
#                       "lansargues",
#                       "mauguio",
#                       "saint_nazaire_de_pezan",
#                       "saint_just",
#                       "valergues")) %>%
#filter(Month %in% c(2,3,4)) %>%
filter(Year %in% 2024) %>%
group_by(commune, Month) %>%
summarize(tot = sum(n)) %>%
ggplot() +
geom_col(aes(as_factor(Month), tot)) +
facet_wrap(~commune) +
labs(y = "number of coypus removed", x = "month")
unique(raw_dat$removal_coypus$Year)
plot_2015
plot_2016
plot_2017
plot_2018
plot_2019
plot_2020
plot_2021
plot_2022
plot_2023
plot_2024
